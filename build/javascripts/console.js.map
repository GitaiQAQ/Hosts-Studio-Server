{"version":3,"sources":["javascripts/console.js"],"names":["activateModal_New","e","document","createElement","$","addClass","location","origin","appendTo","mui","overlay","activateModal_Detail","t","socket","emit","id","level","showLog","n","o","author","objectId","User","title","fork","url","lock","description","hosts_remove","remove","io","cookie","on","console","log","AV","push","appId","appKey","open","window","send","username","msg","bind","keyCode","this","value","length","mousemove","removeClass"],"mappings":"AAGA,QAASA,qBACL,GAAIC,GAAIC,SAASC,cAAc,MAC/BC,GAAEH,GAAGI,SAAS,aACdD,EAAEH,GAAGI,SAAS,SACdD,EAAE,4VAAkXE,SAASC,OAAS,8VAAkXC,SAASP,GACjwBQ,IAAIC,QAAQ,KAAMT,GAGtB,QAASU,sBAAqBV,GAC1B,GAAIW,GAAIV,SAASC,cAAc,MAC/BC,GAAEQ,GAAGP,SAAS,WACdD,EAAE,oDAAoDI,SAASI,GAC/DH,IAAIC,QAAQ,KAAME,GAClBC,OAAOC,KAAK,QAAS,OACjBC,GAAId,GACL,SAASA,EAAGW,GAEX,GADAH,IAAIC,QAAQ,OACRT,EAGA,MAFAA,GAAEe,MAAQ,aACVC,SAAQhB,EAGZ,IAAIiB,GAAIhB,SAASC,cAAc,MAC/BC,GAAEc,GAAGb,SAAS,aACdD,EAAEc,GAAGb,SAAS,SACdD,EAAEc,GAAGb,SAAS,KACd,IAAIc,IAAI,CACJP,GAAEQ,QAAUR,EAAEQ,OAAOC,WAAaC,KAAKD,WACvCF,GAAI,GAERf,EAAE,sCAAwCe,EAAI,IAAM,UAAYP,EAAES,SAAW,aAAeT,EAAEW,OAASJ,EAAI,yCAA2CP,EAAEY,MAAQZ,EAAEY,KAAKH,SAAW,8CAAgDT,EAAEY,KAAKH,SAAW,0EAA4E,IAAM,+BAAiC,4HAAmIT,EAAEW,MAAQ,sHAAwHX,EAAEa,IAAM,oEAAsEnB,SAASC,OAAS,gGAAkGY,EAAIP,EAAEc,KAAO,UAAY,IAAM,gIAA4Id,EAAEe,YAAc,8FAAgGR,EAAI,KAAiB,QAA8B,aAAeA,EAAI,sCAAwCP,EAAES,SAAW,6BAA+B,IAAM,WAAWb,SAASU,GAC7vCT,IAAIC,QAAQ,KAAMQ,KAoB1B,QAASU,cAAa3B,GAClB,GAAIW,GAAIV,SAASC,cAAc,MAC/BC,GAAEQ,GAAGP,SAAS,WACdD,EAAE,oDAAoDI,SAASI,GAC/DH,IAAIC,QAAQ,KAAME,GAClBC,OAAOC,KAAK,QAAS,OACjBC,GAAId,GACL,SAASA,EAAGW,GAEX,MADAH,KAAIC,QAAQ,OACRT,GACAA,EAAEe,MAAQ,aACVC,SAAQhB,QAGZG,GAAE,aAAeQ,EAAY,SAAI,MAAMiB,WApE/C,GAAIhB,QAASiB,IACbjB,QAAOC,KAAK,QAASZ,SAAS6B,QAoC9BlB,OAAOmB,GAAG,QAAS,SAAS/B,EAAGW,GAC3B,MAAIX,IACAA,EAAEe,MAAQ,aACVC,SAAQhB,QAGZgC,SAAQC,IAAI,QAASjC,EAAGW,KAE5BC,OAAOmB,GAAG,SAAU,SAAS/B,EAAGW,GAC5B,MAAIX,IACAA,EAAEe,MAAQ,aACVC,SAAQhB,QAGZgC,SAAQC,IAAI,SAAUjC,EAAGW,KAmB5B,WACG,GAAIX,GAAIkC,GAAGC,MACPC,MAAOA,MACPC,OAAQA,QAEZrC,GAAEsC,KAAK,WACHN,QAAQC,IAAI,YAEhBjC,EAAE+B,GAAG,UAAW,SAAS/B,GACrBgC,QAAQC,IAAIjC,GACZgB,QAAQhB,KAEZuC,OAAOC,KAAO,SAAS7B,GACnBX,EAAEwC,MACEC,SAAUpB,KAAKoB,SACf1B,MAAO,UACP2B,IAAK/B,GACN,SAASX,GACJA,EACAgC,QAAQC,IAAI,UAEZD,QAAQC,KACJlB,MAAO,SACP2B,IAAK,cAKrBvC,EAAE,eAAewC,KAAK,WAAY,SAAS3C,GACtB,MAAbA,EAAE4C,SAAmBC,KAAKC,MAAMC,OAAS,IACzCpC,EAAEkC,KAAKC,OACPD,KAAKC,MAAQ,SAIzB3C,EAAE,aAAa6C,UAAU,WACrB7C,EAAE0C,MAAMI,YAAY","file":"javascripts/console.js","sourcesContent":["var socket = io();\nsocket.emit(\"login\", document.cookie);\n\nfunction activateModal_New() {\n    var e = document.createElement(\"div\");\n    $(e).addClass(\"mui-panel\");\n    $(e).addClass(\"popup\");\n    $('<form method=\"post\" action=\"/hosts\">  <legend>\\u65b0\\u5efa\\u9879\\u76ee</legend>  <div class=\"mui-form-group\">    <input type=\"text\" name=\"title\" class=\"mui-form-control\" placeholder=\"title\">  </div>  <div class=\"mui-form-group\"><input type=\"url\" name=\"url\" class=\"mui-form-control\" placeholder=\"url\"></div>  <iframe height=\"50px\" frameborder=\"0\" name=\"upload\" src=\"' + location.origin + '/hosts/upload\"></iframe><div class=\"mui-checkbox\">    <label>      <input name=\"lock\" type=\"checkbox\">\\u79c1\\u6709    </label>  </div>  <div class=\"mui-form-group\">    <textarea name=\"description\" class=\"mui-form-control\" placeholder=\"description\"></textarea>  </div>  <button type=\"submit\" class=\"mui-btn mui-btn-default mui-btn-raised\">\\u65b0\\u5efa</button></form>').appendTo(e);\n    mui.overlay(\"on\", e)\n}\n\nfunction activateModal_Detail(e) {\n    var t = document.createElement(\"div\");\n    $(t).addClass(\"spinner\");\n    $('<div class=\"dot1\"></div><div class=\"dot2\"></div>').appendTo(t);\n    mui.overlay(\"on\", t);\n    socket.emit(\"Hosts\", \"get\", {\n        id: e\n    }, function(e, t) {\n        mui.overlay(\"off\");\n        if (e) {\n            e.level = \"danger\";\n            showLog(e);\n            return\n        }\n        var n = document.createElement(\"div\");\n        $(n).addClass(\"mui-panel\");\n        $(n).addClass(\"popup\");\n        $(n).addClass(\"lg\");\n        var o = false;\n        if (t.author && t.author.objectId === User.objectId) {\n            o = true\n        }\n        $('<form method=\"post\" action=\"/hosts' + (o ? \"/\" : \"?fork=\") + t.objectId + '\"><legend>' + t.title + (o ? '<i class=\"fa fa-pencil-square-o\"></i>' + (t.fork && t.fork.objectId ? \"<a href=\\\"javascript:activateModal_Detail('\" + t.fork.objectId + '\\')\" title=\"\" style=\"float: right;\"><i class=\"fa fa-code-fork\"></i></a>' : \"\") : '<i class=\"fa fa-clone\"></i>') + '</legend><div class=\"mui-form-group\">' + '<input type=\"text\" name=\"title\" class=\"mui-form-control\" placeholder=\"title\" value=\"' + t.title + '\"></div><div class=\"mui-form-group\"><input type=\"url\" name=\"url\" class=\"mui-form-control\" placeholder=\"url\" value=\"' + t.url + '\"></div><iframe height=\"50px\" frameborder=\"0\" name=\"upload\" src=\"' + location.origin + '/hosts/upload\"></iframe><div class=\"mui-checkbox\"><label><input name=\"lock\" type=\"checkbox\" ' + (o & t.lock ? \"checked\" : \"\") + '>\\u79c1\\u6709</label></div><div class=\"mui-form-group\"><textarea name=\"description\" class=\"mui-form-control\" placeholder=\"description\">' + t.description + '</textarea>  </div>  <button type=\"submit\" class=\"mui-btn mui-btn-default mui-btn-raised\">' + (o ? \"\\u4fee\\u6539\" : \"\\u6536\\u85cf\\u5230\\u5e93\") + \"</button>\" + (o ? \"<a href=\\\"javascript:hosts_remove('\" + t.objectId + '\\')\" title=\"\">  Delete</a>' : \"\") + \"</form>\").appendTo(n);\n        mui.overlay(\"on\", n)\n    })\n}\nsocket.on(\"login\", function(e, t) {\n    if (e) {\n        e.level = \"danger\";\n        showLog(e);\n        return\n    }\n    console.log(\"login\", e, t)\n});\nsocket.on(\"logout\", function(e, t) {\n    if (e) {\n        e.level = \"danger\";\n        showLog(e);\n        return\n    }\n    console.log(\"logout\", e, t)\n});\n\nfunction hosts_remove(e) {\n    var t = document.createElement(\"div\");\n    $(t).addClass(\"spinner\");\n    $('<div class=\"dot1\"></div><div class=\"dot2\"></div>').appendTo(t);\n    mui.overlay(\"on\", t);\n    socket.emit(\"Hosts\", \"del\", {\n        id: e\n    }, function(e, t) {\n        mui.overlay(\"off\");\n        if (e) {\n            e.level = \"danger\";\n            showLog(e);\n            return\n        }\n        $('div[name=\"' + t[\"objectId\"] + '\"]').remove()\n    });\n}(function() {\n    var e = AV.push({\n        appId: appId,\n        appKey: appKey\n    });\n    e.open(function() {\n        console.log(\"\\u5f00\\u542f\\u63a5\\u6536\\u63a8\\u9001\")\n    });\n    e.on(\"message\", function(e) {\n        console.log(e)\n        showLog(e)\n    });\n    window.send = function(t) {\n        e.send({\n            username: User.username,\n            level: \"primary\",\n            msg: t\n        }, function(e) {\n            if (e) {\n                console.log(\"\\u63a8\\u9001\\u6210\\u529f\\u53d1\\u9001\")\n            } else {\n                console.log({\n                    level: \"danger\",\n                    msg: \"\\u63a8\\u9001\\u53d1\\u9001\\u5931\\u8d25\"\n                })\n            }\n        })\n    };\n    $(\"#talk_input\").bind(\"keypress\", function(e) {\n        if (e.keyCode == \"13\" && this.value.length > 0) {\n            t(this.value);\n            this.value = \"\"\n        }\n    })\n})();\n$(\"#msg_send\").mousemove(function() {\n    $(this).removeClass(\"mui-btn-danger\")\n});"],"sourceRoot":"/source/"}